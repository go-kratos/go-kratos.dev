"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5190],{764:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>i,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"getting-started/usage","title":"Usage","description":"Installation","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/getting-started/02-usage.md","sourceDirName":"getting-started","slug":"/getting-started/usage","permalink":"/en/docs/getting-started/usage","draft":false,"unlisted":false,"editUrl":"https://github.com/go-kratos/go-kratos.dev/edit/main/i18n/en/docusaurus-plugin-content-docs/current/getting-started/02-usage.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"usage","title":"Usage"},"sidebar":"docs","previous":{"title":"Quick Start","permalink":"/en/docs/getting-started/start"},"next":{"title":"Plugins","permalink":"/en/docs/getting-started/plugin"}}');var r=o(4848),s=o(8453);const l={id:"usage",title:"Usage"},a=void 0,i={},c=[{value:"Installation",id:"installation",level:2},{value:"Project Creation",id:"project-creation",level:2},{value:"Adding Proto files",id:"adding-proto-files",level:2},{value:"Generate Proto Codes",id:"generate-proto-codes",level:2},{value:"Generate Service Codes",id:"generate-service-codes",level:2},{value:"Run project",id:"run-project",level:2},{value:"View Version",id:"view-version",level:2},{value:"Tool upgrade",id:"tool-upgrade",level:2},{value:"Changelog",id:"changelog",level:2},{value:"View help",id:"view-help",level:2}];function d(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"go install github.com/go-kratos/kratos/cmd/kratos/v2@latest\n"})}),"\n",(0,r.jsx)(n.h2,{id:"project-creation",children:"Project Creation"}),"\n",(0,r.jsx)(n.p,{children:"To create a new project:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kratos new helloworld\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"-r"})," to specify the source"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# If pull fails in China, you can use gitee source.\nkratos new helloworld -r https://gitee.com/go-kratos/kratos-layout.git\n# You can also use custom templates\nkratos new helloworld -r xxx-layout.git\n# You can also specify the source through the environment variable\nKRATOS_LAYOUT_REPO=xxx-layout.git\nkratos new helloworld\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"-b"})," to specify the branch"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kratos new helloworld -b main\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"--nomod"})," to add services and working together using ",(0,r.jsx)(n.code,{children:"go.mod"}),", large warehouse mode"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kratos new helloworld\ncd helloworld\nkratos new app/user --nomod\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:".\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 LICENSE\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 api\n\u2502\xa0\xa0 \u2514\u2500\u2500 helloworld\n\u2502\xa0\xa0     \u2514\u2500\u2500 v1\n\u2502\xa0\xa0         \u251c\u2500\u2500 error_reason.pb.go\n\u2502\xa0\xa0         \u251c\u2500\u2500 error_reason.proto\n\u2502\xa0\xa0         \u251c\u2500\u2500 greeter.pb.go\n\u2502\xa0\xa0         \u251c\u2500\u2500 greeter.proto\n\u2502\xa0\xa0         \u251c\u2500\u2500 greeter_grpc.pb.go\n\u2502\xa0\xa0         \u2514\u2500\u2500 greeter_http.pb.go\n\u251c\u2500\u2500 app\n\u2502\xa0\xa0 \u2514\u2500\u2500 user\n\u2502\xa0\xa0     \u251c\u2500\u2500 Dockerfile\n\u2502\xa0\xa0     \u251c\u2500\u2500 Makefile\n\u2502\xa0\xa0     \u251c\u2500\u2500 cmd\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2514\u2500\u2500 user\n\u2502\xa0\xa0     \u2502\xa0\xa0     \u251c\u2500\u2500 main.go\n\u2502\xa0\xa0     \u2502\xa0\xa0     \u251c\u2500\u2500 wire.go\n\u2502\xa0\xa0     \u2502\xa0\xa0     \u2514\u2500\u2500 wire_gen.go\n\u2502\xa0\xa0     \u251c\u2500\u2500 configs\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2514\u2500\u2500 config.yaml\n\u2502\xa0\xa0     \u251c\u2500\u2500 internal\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u251c\u2500\u2500 biz\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 biz.go\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 greeter.go\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u251c\u2500\u2500 conf\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 conf.pb.go\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 conf.proto\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u251c\u2500\u2500 data\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 data.go\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 greeter.go\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u251c\u2500\u2500 server\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 grpc.go\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 http.go\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 server.go\n\u2502\xa0\xa0     \u2502\xa0\xa0 \u2514\u2500\u2500 service\n\u2502\xa0\xa0     \u2502\xa0\xa0     \u251c\u2500\u2500 greeter.go\n\u2502\xa0\xa0     \u2502\xa0\xa0     \u2514\u2500\u2500 service.go\n\u2502\xa0\xa0     \u2514\u2500\u2500 openapi.yaml\n\u251c\u2500\u2500 cmd\n\u2502\xa0\xa0 \u2514\u2500\u2500 helloworld\n\u2502\xa0\xa0     \u251c\u2500\u2500 main.go\n\u2502\xa0\xa0     \u251c\u2500\u2500 wire.go\n\u2502\xa0\xa0     \u2514\u2500\u2500 wire_gen.go\n\u251c\u2500\u2500 configs\n\u2502\xa0\xa0 \u2514\u2500\u2500 config.yaml\n\u251c\u2500\u2500 go.mod\n\u251c\u2500\u2500 go.sum\n\u251c\u2500\u2500 internal\n\u2502\xa0\xa0 \u251c\u2500\u2500 biz\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 README.md\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 biz.go\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 greeter.go\n\u2502\xa0\xa0 \u251c\u2500\u2500 conf\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 conf.pb.go\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 conf.proto\n\u2502\xa0\xa0 \u251c\u2500\u2500 data\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 README.md\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 data.go\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 greeter.go\n\u2502\xa0\xa0 \u251c\u2500\u2500 server\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 grpc.go\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 http.go\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 server.go\n\u2502\xa0\xa0 \u2514\u2500\u2500 service\n\u2502\xa0\xa0     \u251c\u2500\u2500 README.md\n\u2502\xa0\xa0     \u251c\u2500\u2500 greeter.go\n\u2502\xa0\xa0     \u2514\u2500\u2500 service.go\n\u251c\u2500\u2500 openapi.yaml\n\u2514\u2500\u2500 third_party\n    \u251c\u2500\u2500 README.md\n    \u251c\u2500\u2500 errors\n    \u2502\xa0\xa0 \u2514\u2500\u2500 errors.proto\n    \u251c\u2500\u2500 google\n    \u2502\xa0\xa0 \u251c\u2500\u2500 api\n    \u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 annotations.proto\n    \u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 client.proto\n    \u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 field_behavior.proto\n    \u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 http.proto\n    \u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 httpbody.proto\n    \u2502\xa0\xa0 \u2514\u2500\u2500 protobuf\n    \u2502\xa0\xa0     \u2514\u2500\u2500 descriptor.proto\n    \u2514\u2500\u2500 validate\n        \u251c\u2500\u2500 README.md\n        \u2514\u2500\u2500 validate.proto\n"})}),"\n",(0,r.jsx)(n.h2,{id:"adding-proto-files",children:"Adding Proto files"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kratos proto add api/helloworld/demo.proto\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output:"}),"\n",(0,r.jsx)(n.p,{children:"api/helloworld/demo.proto"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-protobuf",children:'syntax = "proto3";\n\npackage api.helloworld;\n\noption go_package = "helloworld/api/api/helloworld;helloworld";\noption java_multiple_files = true;\noption java_package = "api.helloworld";\n\nservice Demo {\n    rpc CreateDemo (CreateDemoRequest) returns (CreateDemoReply);\n    rpc UpdateDemo (UpdateDemoRequest) returns (UpdateDemoReply);\n    rpc DeleteDemo (DeleteDemoRequest) returns (DeleteDemoReply);\n    rpc GetDemo (GetDemoRequest) returns (GetDemoReply);\n    rpc ListDemo (ListDemoRequest) returns (ListDemoReply);\n}\n\nmessage CreateDemoRequest {}\nmessage CreateDemoReply {}\n\nmessage UpdateDemoRequest {}\nmessage UpdateDemoReply {}\n\nmessage DeleteDemoRequest {}\nmessage DeleteDemoReply {}\n\nmessage GetDemoRequest {}\nmessage GetDemoReply {}\n\nmessage ListDemoRequest {}\nmessage ListDemoReply {}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"generate-proto-codes",children:"Generate Proto Codes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kratos proto client api/helloworld/demo.proto\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"api/helloworld/demo.pb.go\napi/helloworld/demo_grpc.pb.go\n# Attention: The http code will only be generated if http is declared in the proto file.  \napi/helloworld/demo_http.pb.go\n"})}),"\n",(0,r.jsx)(n.h2,{id:"generate-service-codes",children:"Generate Service Codes"}),"\n",(0,r.jsx)(n.p,{children:"kratos can generate the bootstrap codes from the proto file."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kratos proto server api/helloworld/demo.proto -t internal/service\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output:\ninternal/service/demo.go"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'package service\n\nimport (\n\t"context"\n\n\tpb "helloworld/api/helloworld"\n)\n\ntype DemoService struct {\n\tpb.UnimplementedDemoServer\n}\n\nfunc NewDemoService() pb.DemoServer {\n\treturn &DemoService{}\n}\n\nfunc (s *DemoService) CreateDemo(ctx context.Context, req *pb.CreateDemoRequest) (*pb.CreateDemoReply, error) {\n\treturn &pb.CreateDemoReply{}, nil\n}\nfunc (s *DemoService) UpdateDemo(ctx context.Context, req *pb.UpdateDemoRequest) (*pb.UpdateDemoReply, error) {\n\treturn &pb.UpdateDemoReply{}, nil\n}\nfunc (s *DemoService) DeleteDemo(ctx context.Context, req *pb.DeleteDemoRequest) (*pb.DeleteDemoReply, error) {\n\treturn &pb.DeleteDemoReply{}, nil\n}\nfunc (s *DemoService) GetDemo(ctx context.Context, req *pb.GetDemoRequest) (*pb.GetDemoReply, error) {\n\treturn &pb.GetDemoReply{}, nil\n}\nfunc (s *DemoService) ListDemo(ctx context.Context, req *pb.ListDemoRequest) (*pb.ListDemoReply, error) {\n\treturn &pb.ListDemoReply{}, nil\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"run-project",children:"Run project"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"If there are multiple items under the subdirectory, the selection menu appears"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kratos run\n"})}),"\n",(0,r.jsx)(n.h2,{id:"view-version",children:"View Version"}),"\n",(0,r.jsx)(n.p,{children:"To show the tool version"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kratos -v\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"kratos version v2.2.1\n"})}),"\n",(0,r.jsx)(n.h2,{id:"tool-upgrade",children:"Tool upgrade"}),"\n",(0,r.jsx)(n.p,{children:"The following tools will be upgraded"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Kratos and the tool itself"}),"\n",(0,r.jsx)(n.li,{children:"Protoc related build plugins"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kratos upgrade\n"})}),"\n",(0,r.jsx)(n.h2,{id:"changelog",children:"Changelog"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Equivalent to printing the version changelog of https://github.com/go-kratos/kratos/releases/latest \nkratos changelog\n\n# Print the update log of the specified version\nkratos changelog v2.1.4\n\n# View the changelog since the latest release to now\nkratos changelog dev\n"})}),"\n",(0,r.jsx)(n.h2,{id:"view-help",children:"View help"}),"\n",(0,r.jsxs)(n.p,{children:["Add ",(0,r.jsx)(n.code,{children:"-h"})," to any command for help"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kratos -h\nkratos new -h\n"})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>l,x:()=>a});var t=o(6540);const r={},s=t.createContext(r);function l(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);